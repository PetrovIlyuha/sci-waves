{"ast":null,"code":"import cookie from \"js-cookie\"; // setting cookie\n\nexport var setCookie = function setCookie(key, value) {\n  if (true) {\n    cookie.set(key, value, {\n      expires: 7\n    });\n  }\n}; // removing cookie\n\nexport var removeCookie = function removeCookie(key) {\n  if (true) {\n    cookie.remove(key);\n  }\n}; // get cookie from storage\n\nexport var getCookie = function getCookie(key) {\n  return true ? getCookieClientSide(key) : getCookieServerSide(key, req);\n};\nexport var getCookieClientSide = function getCookieClientSide(key) {\n  return cookie.get(key);\n};\nexport var getCookieServerSide = function getCookieServerSide(key, req) {\n  if (!req.headers.cookie) {\n    return undefined;\n  }\n\n  var token = req.headers.cookie.split(\";\").find(function (cookie) {\n    return cookie.trim().startsWith(\"\".concat(key, \"=\"));\n  });\n  if (!token) return undefined;\n  var tokenValue = token.split(\"=\")[1];\n  console.log(\"Get cookie from server\", tokenValue);\n}; // save to local storage\n\nexport var setLocalStorage = function setLocalStorage(key, value) {\n  if (true) {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n}; // clear local storage\n\nexport var clearLocalStorage = function clearLocalStorage(key) {\n  if (true) {\n    localStorage.removeItem(key);\n  }\n}; // user authentication\n\nexport var authenticateUser = function authenticateUser(response, next) {\n  setCookie(\"token\", response.data.token);\n  setLocalStorage(\"user\", response.data.user);\n  next();\n}; // get user data from local storage\n\nexport var isUserAuthenticated = function isUserAuthenticated() {\n  if (true) {\n    var cookiePresent = getCookie(\"token\");\n\n    if (cookiePresent) {\n      if (localStorage.getItem(\"user\")) {\n        return JSON.parse(localStorage.getItem(\"user\"));\n      } else {\n        return false;\n      }\n    }\n  }\n}; // log out user\n\nexport var logOutUser = function logOutUser() {\n  if (true) {\n    clearLocalStorage(\"user\");\n    removeCookie(\"token\");\n  }\n};","map":{"version":3,"sources":["D:/Courses Projects In Work/Portfolio/sci-waves/client/utils/helpers.js"],"names":["cookie","setCookie","key","value","set","expires","removeCookie","remove","getCookie","getCookieClientSide","getCookieServerSide","req","get","headers","undefined","token","split","find","trim","startsWith","tokenValue","console","log","setLocalStorage","localStorage","setItem","JSON","stringify","clearLocalStorage","removeItem","authenticateUser","response","next","data","user","isUserAuthenticated","cookiePresent","getItem","parse","logOutUser"],"mappings":"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","sourcesContent":["import cookie from \"js-cookie\"\r\n\r\n// setting cookie\r\nexport const setCookie = (key, value) => {\r\n  if (process.browser) {\r\n    cookie.set(key, value, {\r\n      expires: 7,\r\n    })\r\n  }\r\n}\r\n\r\n// removing cookie\r\nexport const removeCookie = (key) => {\r\n  if (process.browser) {\r\n    cookie.remove(key)\r\n  }\r\n}\r\n\r\n// get cookie from storage\r\nexport const getCookie = (key) => {\r\n  return process.browser\r\n    ? getCookieClientSide(key)\r\n    : getCookieServerSide(key, req)\r\n}\r\n\r\nexport const getCookieClientSide = (key) => {\r\n  return cookie.get(key)\r\n}\r\n\r\nexport const getCookieServerSide = (key, req) => {\r\n  if (!req.headers.cookie) {\r\n    return undefined\r\n  }\r\n  let token = req.headers.cookie\r\n    .split(\";\")\r\n    .find((cookie) => cookie.trim().startsWith(`${key}=`))\r\n  if (!token) return undefined\r\n  let tokenValue = token.split(\"=\")[1]\r\n  console.log(\"Get cookie from server\", tokenValue)\r\n}\r\n\r\n// save to local storage\r\nexport const setLocalStorage = (key, value) => {\r\n  if (process.browser) {\r\n    localStorage.setItem(key, JSON.stringify(value))\r\n  }\r\n}\r\n\r\n// clear local storage\r\nexport const clearLocalStorage = (key) => {\r\n  if (process.browser) {\r\n    localStorage.removeItem(key)\r\n  }\r\n}\r\n\r\n// user authentication\r\nexport const authenticateUser = (response, next) => {\r\n  setCookie(\"token\", response.data.token)\r\n  setLocalStorage(\"user\", response.data.user)\r\n  next()\r\n}\r\n\r\n// get user data from local storage\r\nexport const isUserAuthenticated = () => {\r\n  if (process.browser) {\r\n    const cookiePresent = getCookie(\"token\")\r\n    if (cookiePresent) {\r\n      if (localStorage.getItem(\"user\")) {\r\n        return JSON.parse(localStorage.getItem(\"user\"))\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// log out user\r\nexport const logOutUser = () => {\r\n  if (process.browser) {\r\n    clearLocalStorage(\"user\")\r\n    removeCookie(\"token\")\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}